.reels {
    position: relative;
    width: 97%;
    aspect-ratio: 20/14;
    overflow: hidden;
    clip-path: inset(0 round var(--radius-lg));
    transform: translateZ(0);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-xs);
    margin: 0 var(--spacing-xs);
    padding: 3rem 1.5rem 1.5rem;
    /* Darker mechanical frame with contrast */
    background: linear-gradient(to bottom, 
        var(--box-shadow-color) 0%,
        rgba(6, 6, 14, 0.2) 10%,
        transparent 20%,
        transparent 80%,
        rgba(6, 6, 14, 0.2) 90%,
        var(--box-shadow-color) 100%
    );
    background-color: var(--dark-silver);
    border-radius: var(--radius-lg);
    transition: transform 0.5s ease;
}

/* Top mechanical bar */
.reels::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2rem;
    background: linear-gradient(to bottom,
        var(--secondary-black) 0%,
        var(--dark-grey) 1%,
        var(--dark-silver) 8%,
        var(--silver) 22%,
        var(--chrome) 52%,
        var(--silver) 65%,
        var(--dark-silver) 80%,
        var(--secondary-black) 100%
    );
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    box-shadow: 
        0 3px 10px var(--box-shadow-color),
        inset 0 1px 0 var(--inset-shadow-color);
    z-index: 5;
}

/* Bottom mechanical bar */
.reels::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 2rem;
    background: linear-gradient(to bottom,
        var(--secondary-black) 0%,
        var(--dark-grey) 5%,
        var(--dark-silver) 15%,
        var(--silver) 45%,
        var(--dark-silver) 75%,
        var(--secondary-black) 100%
    );
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    box-shadow: 
        0 -3px 10px var(--box-shadow-color),
        inset 0 -1px 0 var(--inset-shadow-color);
    z-index: 5;
}

.reel-window {
    position: relative;
    height: 100%;
    width: 100%;
    overflow: hidden;
    padding: var(--spacing-sm) 0;  
    z-index: 2;  
}

/* Track of symbols */
.reel-track {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem; 
    will-change: transform, filter;
}

.reels.spinning .reel { 
    filter: 
        drop-shadow(0.25rem -0.25rem 0.5rem var(--secondary-black)) 
        blur(0.6px);
}

/* Track spinning animation */
.reels.spinning .reel-track {
    animation: continuous-spin 0.3s linear infinite;
}

/* Gradual stopping of reels */
.reels.spinning .reel:nth-child(1) .reel-track {
    animation: continuous-spin 0.15s linear infinite;
}
.reels.spinning .reel:nth-child(2) .reel-track {
    animation: continuous-spin 0.18s linear infinite;
}
.reels.spinning .reel:nth-child(3) .reel-track {
    animation: continuous-spin 0.21s linear infinite;
}
.reels.spinning .reel:nth-child(4) .reel-track {
    animation: continuous-spin 0.24s linear infinite;
}
.reels.spinning .reel:nth-child(5) .reel-track {
    animation: continuous-spin 0.27s linear infinite;
}

/* Gradual stopping */
.reels.stopping-1 .reel:nth-child(1) .reel-track { animation-play-state: paused; }
.reels.stopping-2 .reel:nth-child(1) .reel-track,
.reels.stopping-2 .reel:nth-child(2) .reel-track { animation-play-state: paused; }
.reels.stopping-3 .reel:nth-child(1) .reel-track,
.reels.stopping-3 .reel:nth-child(2) .reel-track,
.reels.stopping-3 .reel:nth-child(3) .reel-track { animation-play-state: paused; }
.reels.stopping-4 .reel:nth-child(1) .reel-track,
.reels.stopping-4 .reel:nth-child(2) .reel-track,
.reels.stopping-4 .reel:nth-child(3) .reel-track,
.reels.stopping-4 .reel:nth-child(4) .reel-track { animation-play-state: paused; }
.reels.stopping-5 .reel .reel-track { animation-play-state: paused; }

.reel {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: clamp(0.28rem, 1.5vw, 0.75rem);
    width: 20%;
    margin: 0 0.2rem 1.25rem;
    
    /* Realistic mechanical reel */
    background: linear-gradient(to bottom, 
        #4f4f5e 0%,
        #8e8e9e 5%,
        #fafaff 35%,
        #fafaff 55%,     
        #8e8e9e 95%,
        #4f4f5e 100%  
    );
    border: 3px solid var(--primary-black);
    border-radius: var(--radius-md);
    box-shadow: 
        inset 0 30px 40px -20px var(--box-shadow-color),
        inset 0 -30px 40px -20px var(--box-shadow-color),
        0 8px 20px var(--box-shadow-color),
        0 0 0 1px var(--dark-silver);
    filter: drop-shadow(0.25rem -0.25rem 0.5rem var(--primary-black));
    overflow: hidden;
    position: relative;
}

/* Top reel shadow */
.reel::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 25%;
    background: linear-gradient(
        to bottom,
        rgba(6, 6, 14, 0.60) 0%,
        rgba(6, 6, 14, 0.35) 50%,
        transparent 100%
    );
    pointer-events: none;
    z-index: 10;
}

/* Bottom reel shadow */
.reel::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 25%;
    background: linear-gradient(
        to top,
        rgba(0, 0, 0, 0.60) 0%,
        rgba(0, 0, 0, 0.35) 50%,
        transparent 100%
    );
    pointer-events: none;
    z-index: 10;
}

.symbol {
    width: 84%;
    height: calc(100% / 3 - 0.5rem);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    z-index: 1;
}

.symbol-harlequin.wild-animate {
    animation: pulse 0.8s ease-in-out infinite;
    will-change: transform, filter;
    transform-origin: center;
}

.symbol.winning {
    animation: win-pulse 0.8s ease-in-out infinite;
    will-change: transform, filter;
    transform-origin: center;
}

.reels:has(.symbol.winning) .symbol:not(.winning) {
    opacity: 0.55;
    transition: opacity 180ms ease;
}

.reels:has(.symbol.winning) .symbol:not(.winning) img {
    filter:
        drop-shadow(0.125rem 0.125rem 0.125rem var(--dark-grey))
        brightness(0.78)
        contrast(0.88);
    transition: filter 180ms ease;
}

.symbol img {
    width: 100%; 
    height: 100%;
    object-fit: contain;
    pointer-events: none;
    filter: drop-shadow(0.125rem 0.125rem 0.125rem var(--dark-grey));
}

/* ========================================
   RESPONSIVE - MOBILE FIRST
   ======================================== */

/* Extra Small Phones - Portrait (320px - 360px) */
@media (max-width: 360px) and (orientation: portrait) {
    .reels {
        padding: 1.6rem var(--spacing-sm) var(--spacing-sm);
        gap: 0.1rem;
        margin: 0 0.15rem;
    }
    
    .reels::before,
    .reels::after {
        height: 1rem;
    }
    
    .reel {
        margin-bottom: var(--spacing-sm);
        border-width: 1.5px;
    }
    
    .reel-track {
        gap: 0.85rem;
    }
    
    .symbol {
        width: 88%;
        height: calc(100% / 3 - 0.35rem);
    }
}

/* ========================================
   LANDSCAPE MODE
   ======================================== */

/* Extra Small - Landscape (max 568px) */
@media (max-width: 568px) and (max-height: 320px) and (orientation: landscape) {
    .reels {
        padding: 1.1rem var(--spacing-sm) var(--spacing-sm);
        gap: 0.08rem;
        margin: 0 0.12rem;
    }
    
    .reels::before,
    .reels::after {
        height: 0.9rem;
    }
    
    .reel {
        margin-bottom: 0.35rem;
        border-width: 1.3px;
    }
    
    .reel-track {
        gap: 0.75rem;
    }
    
    .symbol {
        width: 85%;
        height: calc(100% / 3 - 0.3rem);
    }
}

/* ========================================
   KEYFRAMES
   ======================================== */

@keyframes continuous-spin {
    from { transform: translateY(-33.33%); }
    to { transform: translateY(0); }
}

@keyframes pulse {
    0%, 100% {
        transform: scale(1.02);
        filter:
            brightness(1.1)
            saturate(1.2)
            drop-shadow(0 0 0.125rem var(--silver))
    }

    50% {
        transform: scale(1.05);
        filter:
            brightness(1.2)
            saturate(1.2)
            drop-shadow(0 0 0.25rem var(--silver))
    }
}

@keyframes win-pulse {
    0%, 100% {
        transform: scale(1);
        filter:
            brightness(1.04)
            saturate(1.3)
            drop-shadow(0 0 0.25rem var(--bright-red))
            drop-shadow(0 0 1.25rem var(--win-color));
    }

    50% {
        transform: scale(1.05);
        filter:
            brightness(1.15)
            saturate(1.3)
            drop-shadow(0 0 0.75rem var(--bright-red))
            drop-shadow(0 0 1.75rem var(--win-color));
    }
}